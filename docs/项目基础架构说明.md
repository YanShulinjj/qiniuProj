# 七牛云——多人协助画板 项目说明



#### 1. 项目介绍

​	本项目实现了一个前端基于SVG、后端基于WebSocket协议的多人远程协作型画板，可在移动端和PC端使用。

​    每个用户可以通过指定连接匿名（使用IP地址，后端对IP地址进行加密）加入白板，可以对白板新增一页；白板上可构建直线、矩形、圆角矩形、椭圆、自由曲线、文本，并支持丰富的颜色，在构建图形的时候，其它加入到该白板的用户实时看到图形变化；同时支持只读模式，开启此模式后，只有白板的创建才可编辑白板；还实现了撤销、反撤销、到处内容到本地、从本地读入、一键清空内容。



#### 2. 基础架构

![image-20221112160659238](assert\image-20221112160659238.png)

#### 3.团队分工



> 晏术林： 主要实现后端开发、包含对数据库的设计、HTTP服务的实现、如新建白板、新建页面、持久化白板等逻辑编码；同时辅助实现WebSocket服务器的开发，消息结构设计等
>
> 严振星：主要实现前端开发、对页面的设计、事件的处理函数、同步前端的内容、撤销、反撤销、导出、导入等功能的实现。
>
> 谭贵平：主要实现WebSocket服务器的开发，同时负责将项目部署到Docker，解决所有可能出现的网络问题。



#### 4.可能的项目亮点

1. **多线程**： 

   后端使用golang语言开发，并且使用高性能Web框架 GIN, 同时逻辑代码也涉及到不少的多协程，例如: 对于一个WebSocket服务器，多个client连接，当其中一个client发出了消息，WebSocket需要广播这个消息给所有client，从而实现其它client能够看见此client的白板变化，此时使用多线程技术来实现广播比较好，后期优化考虑引入线程池。

2. **WebSocket的水平扩展和负载均衡**：

   WebSocket的连接会带来开销，并且整个项目大部分操作都是基于WebSocket服务的，HTTP服务很少、数据库和缓存很少，因此数据库、HTTP服务器不会变成性能瓶颈。当用户变多, 单个WebSocket服务承受不住，因此考虑WebSocket服务的水平扩展：针对同一个用户创建的白板，只需保证其WebSocket连接都在一个服务器上即可。一个新用户创建白板时，系统分配一个空闲的WebSocket服务器。本项目采用简单的轮询负载均衡方式选择服务器。

3. **Docker 快速部署**：

   将项目打包成镜像后，使用者只需配置docker环境，然后便可以快速部署我们的项目。